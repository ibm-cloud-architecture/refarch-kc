{"version":3,"sources":["webpack:///./src/pages/implementation/container-anomaly/index.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"0PAQaA,G,UAAe,IACtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,EACF,8BACD,OAAO,YAACJ,EAAD,eAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAG5E,sCACA,8KAA6J,iBAAGC,WAAW,IACvK,KAAQ,kDADiJ,oCAA7J,gEAE8G,iBAAGA,WAAW,IACxH,KAAQ,yCADkG,0BAF9G,4HAIgK,kBAAIA,WAAW,KAAf,kBAJhK,kEAI6Q,iBAAGA,WAAW,IACvR,KAAQ,iFADiQ,qCAJ7Q,oCAMmF,iBAAGA,WAAW,IAC7F,KAAQ,uEADuE,sCANnF,qJAQqM,sBAAQA,WAAW,KAAnB,oBARrM,oCAQ8R,kBAAIA,WAAW,KAAf,cAR9R,2JAQge,iBAAGA,WAAW,IAC1e,KAAQ,0EADod,iDARhe,sEAWA,mBACE,IAAO,qHACP,IAAO,aAET,mDACA,iKAAgJ,sBAAQA,WAAW,KAAnB,oBAAhJ,kCACA,oBACE,UAAa,4BACb,MAAS,CACP,SAAY,WACZ,QAAW,QACX,WAAc,OACd,YAAe,OACf,SAAY,WAPhB,WAUI,oBAAMA,WAAW,OACjB,UAAa,qCACb,MAAS,CACP,cAAiB,SACjB,SAAY,WACZ,OAAU,IACV,KAAQ,IACR,gBAAmB,oxBACnB,eAAkB,QAClB,QAAW,WAnBjB,OAsBA,mBAAKA,WAAW,OACZ,UAAa,0BACb,IAAO,mBACP,MAAS,mBACT,IAAO,uEACP,OAAU,CAAC,4EAA6E,4EAA6E,8EACrK,MAAS,oCACT,MAAS,CACP,MAAS,OACT,OAAU,OACV,OAAU,IACV,cAAiB,SACjB,SAAY,WACZ,IAAO,IACP,KAAQ,KAEV,QAAW,SAtCf,UAyCA,8FAA6E,sBAAQA,WAAW,KAAnB,qBAA7E,oEAAuM,sBAAQA,WAAW,KAAnB,cAAvM,mDAAyS,sBAAQA,WAAW,KAAnB,oBAAzS,gMACA,uIACA,sBACE,kBAAIA,WAAW,MAAf,yJACA,kBAAIA,WAAW,MAAf,0BAA+C,sBAAQA,WAAW,MAAnB,qBAA/C,gNACA,kBAAIA,WAAW,MAAf,WAAgC,sBAAQA,WAAW,MAAnB,eAAhC,wNAEF,2dAA0c,sBAAQA,WAAW,KAAnB,iBAA1c,gFAA4kB,sBAAQA,WAAW,KAAnB,SAA5kB,6GACA,2CAA0B,sBAAQA,WAAW,KAAnB,eAA1B,2OAAqT,sBAAQA,WAAW,KAAnB,UAArT,4GACA,oEACA,yaACA,yHAAwG,iBAAGA,WAAW,IAClH,KAAQ,iDAD4F,6BAAxG,MAOJJ,EAAWK,gBAAiB","file":"component---src-pages-implementation-container-anomaly-index-mdx-104201fe997c060b3686.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/refarch-kc/refarch-kc/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2>{`Introduction`}</h2>\n    <p>{`We have implemented a Container Anomaly use case whereby our Reefer containers will send telemetry health status (1) (although this is simulated by a `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-kc/microservices/telemetry-simulator/\"\n      }}>{`Telemetry Simulator microservice`}</a>{`) in terms of temperature, CO2 level, power level, etc, to a `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-kc/microservices/scoring-mp/\"\n      }}>{`Reefer Telemetry Agent`}</a>{` (4), that we have built using the Reactive Messaging feature from the MicroProfile 3.0 specification onwards, through a `}<em parentName=\"p\">{`reeferTelemety`}</em>{` topic (3). This Reefer Telemetry Agent will, in turn, call an `}<a parentName=\"p\" {...{\n        \"href\": \"https://ibm-cloud-architecture.github.io/refarch-reefer-ml/analyze/ws-ml-dev/\"\n      }}>{`Anomaly Detection Scoring service`}</a>{` (5) we have built following our `}<a parentName=\"p\" {...{\n        \"href\": \"https://ibm-cloud-architecture.github.io/refarch-data-ai-analytics/\"\n      }}>{`Data and AI Reference Architecture`}</a>{` that will determine whether there is an anomaly in a given containers based on the data sent by their IoT sensors. If an anomaly is predicted, a `}<strong parentName=\"p\">{`ContainerAnomaly`}</strong>{` event will get dropped into the `}<em parentName=\"p\">{`containers`}</em>{` topic the container management component (7) of our Reefer Container Reference Application listens to. The Container management component will call an `}<a parentName=\"p\" {...{\n        \"href\": \"https://ibm-cloud-architecture.github.io/refarch-reefer-ml/bpm/readme/\"\n      }}>{`IBM Business Process Management (BPM) process`}</a>{` (8) which will end up with a field engineer fixing the container.`}</p>\n    <img {...{\n      \"src\": \"https://raw.githubusercontent.com/ibm-cloud-architecture/refarch-reefer-ml/master/docs/images/cp-solution-view.png\",\n      \"alt\": \"use case\"\n    }}></img>\n    <h2>{`Container Anomaly process`}</h2>\n    <p>{`This section outlines the process the container management component of our Reefer Container Reference Application follows to handle the `}<strong parentName=\"p\">{`ContainerAnomaly`}</strong>{` events for a given container:`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1024px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"56.25%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAvXAAAL1wElddLwAAAB6ElEQVQoz21Ry2oUQRSdr9NlFvon4kJXAcEPECQbNwpGFIObgK9FJDEowsRpE9TJvDIzPV39qK7qru56dNfL283oQoVTxanLPfeee2sgeD3/+WP8LdisV5soWiwWCKE4SVAcr8MQSE5pFqN4MUPrZUoiqWuthKLYKDUQOJ0cPBk/f5R8D0KESJ4rpXBOKGiyTEkhW51dDEcP7y8/H72ePns/f7EZfjx7cC8Jvgyc0TzPaYp5VZOSF5UipSiYBFAm46yIYkLzMr1a0/ArSgOmiOYFi0It+MB73xp/ccWHl8UqEWEqlzEHsozFBqvgEp+erRCqEqIrfNGwqK1jsj523oJw4Bzc/nxWnASpaIzWTkotG9u0lrLm5dH6dMKSxp2v6qJ2mFnOay1yo00nhgN6Y/sawL1X3sOrg7GN9+TxU3TjZnn8CbMa56XRzrVaa+jstmJtrO09NEURvX1nVWOlMrWEmDo8ZHfv2NEI/qUqStenmc71n85m2xlsiVHQmQYxF5Aj9vbKnR05mQEHNPv77Pq1ZjhstP5b3FX9bduAHe/lwSt26zafLlJK00rxDyf17q6aTFtj/hU73XYzACC4JRDsFuQxVZtSEO+Etv9ZWD+Pg/kBXQ2wTebx+I3gVYYpoZXrLZl+Yb8AUL9j5l98lB0AAAAASUVORK5CYII=')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"sequence diagram\",\n        \"title\": \"sequence diagram\",\n        \"src\": \"/refarch-kc/static/59344bcf8d9dbdc6f9f428c1396f454b/2faef/Slide1.png\",\n        \"srcSet\": [\"/refarch-kc/static/59344bcf8d9dbdc6f9f428c1396f454b/7fc1e/Slide1.png 288w\", \"/refarch-kc/static/59344bcf8d9dbdc6f9f428c1396f454b/a5df1/Slide1.png 576w\", \"/refarch-kc/static/59344bcf8d9dbdc6f9f428c1396f454b/2faef/Slide1.png 1024w\"],\n        \"sizes\": \"(max-width: 1024px) 100vw, 1024px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`As we can see in the image, the container management component called `}<strong parentName=\"p\">{`Spring Containers`}</strong>{` (since it is written using the Spring Framework) listens to the `}<strong parentName=\"p\">{`containers`}</strong>{` topic. The Spring Containers component expects `}<strong parentName=\"p\">{`ContainerAnomaly`}</strong>{` events. However, it will not trigger the “container to maintenance” process until it receives 3 ContainerAnomaly events for a given container (this decreases the load on the BPM process).`}</p>\n    <p>{`Once we have received 3 ContainerAnomaly events for a specific container, the Spring Container component will:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Call the BPM process that will manage the assignment of a field engineer to have a look at and fix, if needed, the container at the destination port.`}</li>\n      <li parentName=\"ol\">{`Set the container into `}<strong parentName=\"li\">{`MaintenanceNeeded`}</strong>{` state which will prevent that container from getting any order assigned. This is important as containers does not always fail while carrying goods overseas in a ship but also while they are at the docks.`}</li>\n      <li parentName=\"ol\">{`Send an `}<strong parentName=\"li\">{`OrderSpoilt`}</strong>{` event to the orders topic, in case the container was allocated to an order and was carrying goods overseas, to notify any other Reefer Container Reference Application component that is interested on this event.`}</li>\n    </ol>\n    <p>{`Once the BPM process has received the call from the Spring Container component, it will trigger a process whereby a field engineer will get assigned the task of checking and fixing the container, either at the dock where it is if it was not carrying goods overseas in a ship when the anomaly happened or once it gets to the destination port otherwise. Before the field engineer starts its work, the BPM process will interact to put the container into `}<strong parentName=\"p\">{`InMaintenance`}</strong>{` state. It will also interact to get the container off maintenance mode into `}<strong parentName=\"p\">{`Empty`}</strong>{` state, so that the container is again available for order allocation, once the container has been fixed.`}</p>\n    <p>{`As a result of the `}<strong parentName=\"p\">{`OrderSpoilt`}</strong>{` event sent into the orders topic, the Order Command component of our Reefer Container Reference Application that manages the orders will set the order, which the container with anomalies was allocated to and carrying goods for, to `}<strong parentName=\"p\">{`Spoilt`}</strong>{`. This could potentially trigger a customer care interaction process whereby the customer gets notified.`}</p>\n    <h2>{`IBM Business Process Manager (BPM) process`}</h2>\n    <p>{`As we can see in the diagram and explanation above, the Spring Containers component calls a BPM process for a field engineer to get assigned to checking and fixing the potentially bad container. However, the fact that our Spring Containers component calls another, potentially external, service through an HTTP or RPC call introduces a dependency that could actually be troublesome if the call fails.`}</p>\n    <p>{`What can we do in this case? We have a look at this usual scenario in distributed systems in the `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-kc/implementation/dead-letter-queue/\"\n      }}>{`Dead Letter Queue section`}</a>{`.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}