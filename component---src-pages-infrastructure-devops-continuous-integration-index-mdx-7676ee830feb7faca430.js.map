{"version":3,"sources":["webpack:///./src/pages/infrastructure/devops-continuous-integration/index.mdx"],"names":["name","_frontmatter","PageDescription","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-infrastructure-devops-continuous-integration-index-mdx-7676ee830feb7faca430.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/refarch-kc/refarch-kc/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <PageDescription mdxType=\"PageDescription\">\nThe implemented DevOps pipelines for the Reefer Container Shipment solution reference implementation of the Event-Driven Reference Architecture. This chapter focuses on the <strong>Continuous Integration</strong> capability implemented in the reference implementation.\n    </PageDescription>\n    <h1>{`Overview`}</h1>\n    <p>{`Our `}<a parentName=\"p\" {...{\n        \"href\": \"#continuous-integration\"\n      }}>{`Continuous Integration (CI) approach`}</a>{`, `}<em parentName=\"p\">{`the topic of this chapter`}</em>{`, is one of “zero-infrastructure overhead”. To accomplish this goal, we utilize `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/features/actions\"\n      }}>{`GitHub Actions`}</a>{` to build and push a microservice’s associated container images to `}<a parentName=\"p\" {...{\n        \"href\": \"https://hub.docker.com/u/ibmcase\"\n      }}>{`Docker Hub`}</a>{` for public consumption. The GitHub Actions workflows are defined in the owning repository’s `}<inlineCode parentName=\"p\">{`.github/workflows/dockerbuild.yaml`}</inlineCode>{` file.`}</p>\n    <p>{`Our `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-kc/infrastructure/devops-gitops\"\n      }}>{`GitOps approach`}</a>{` focuses on a single-repository, environment-per-subdirectory model which can be forked and cloned to replicate deployments to other clusters and environments. The reference implementation utilizes `}<a parentName=\"p\" {...{\n        \"href\": \"https://kustomize.io/\"\n      }}>{`Kustomize`}</a>{` as its templating technology to utilize the `}<inlineCode parentName=\"p\">{`app-deploy.yaml`}</inlineCode>{` files, provided by each individual microservice, as a base and then layer in environment-specific configuration and credentials as needed.`}</p>\n    <p>{`Our `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-kc/infrastructure/devops-continuous-delivery/\"\n      }}>{`Continuous Delivery (CD) approach`}</a>{` focuses on a GitOps-based delivery model, using a GitHub repository as a single source of truth for the deployment, management, and operations of our running application components. In this model, we have the flexibility to use multiple open-source technologies to apply the single source of truth from a given GitHub repository onto a desired cluster environment.`}</p>\n    <h1>{`Continuous integration`}</h1>\n    <p>{`The continuous integration workflow for our project is detailed figure below:`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"715px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"44.09722222222222%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAhOAAAITgGMMQDsAAABb0lEQVQoz4VS207CQBDtX/o//oQf4LOJiRpMeDcxMTFEuQtYKJSLlELL3rvH2S0ooMaTbNvp7pyZc2YDa4GioAeBMYY0XUNp4+ObShWV+6r/DuMlaiOORaahtYJSGoewtuQIrC1cCEVxmnNE8RxMlIdf6i281htUQKM5THB+HeOxzyF4jmE0wXK1RrJKIaX8Ig3ilcDVc4bOaIlOp43uewSuzFH1jw1DzjhllP9v7yro9QdwkVPjlimKssNamOHsooeH5hzTcYjO2wDRPPFVXUVTlN37Dnar3mghns5ItsKWCnEhYcyOcCsN2t0xhmEEIQVykrtIUjok/AGhLbTzmMjtbjlI8jDfMiJklKe+PXTMgjOsNxl5kvrNPQotMZktkNLeofH79ym8h37KrvLRtCyeJgqXLxLdpJQinU87WfagW3vSefBzw2dgxQyGiUCSkSTO6aoY6APCvxD8dpc8MU3N0H1zXjrjnWfFP5IdPgG6drmLpB3oYAAAAABJRU5ErkJggg==')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"CI main\",\n        \"title\": \"CI main\",\n        \"src\": \"/refarch-kc/static/90f1a657de33e3edad0dadfaab570cb0/8895e/ci-main.png\",\n        \"srcSet\": [\"/refarch-kc/static/90f1a657de33e3edad0dadfaab570cb0/7fc1e/ci-main.png 288w\", \"/refarch-kc/static/90f1a657de33e3edad0dadfaab570cb0/a5df1/ci-main.png 576w\", \"/refarch-kc/static/90f1a657de33e3edad0dadfaab570cb0/8895e/ci-main.png 715w\"],\n        \"sizes\": \"(max-width: 715px) 100vw, 715px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`On the left side, the developer uses their environment with Appsody CLI to build and test the code. Once tests have run successfully, they commit and push the code to the main branch, which triggers the GitHub Actions workflow. For the walkthrough of our CI process, we will be using the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/tree/master/order-command-ms\"\n      }}>{`Order Command`}</a>{` microservice as our reference point.`}</p>\n    <h2>{`Task 1 - Validate Docker Secrets`}</h2>\n    <p>{`The first task in each GitHub Actions workflow, `}<strong parentName=\"p\"><a parentName=\"strong\" {...{\n          \"href\": \"https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/blob/master/.github/workflows/dockerbuild.yaml#L11-L53\"\n        }}>{`validate-docker-secrets`}</a></strong>{`, ensures that all the necessary Secrets are defined on the repository under which the build action is running. Similar to Kubernetes Secrets, `}<a parentName=\"p\" {...{\n        \"href\": \"https://help.github.com/en/actions/automating-your-workflow-with-github-actions/creating-and-using-encrypted-secrets\"\n      }}>{`GitHub Repository Secrets`}</a>{` allow you to store encrypted, sensitive information in a programmatically accessible way.`}</p>\n    <p>{`Here is an example of such secret definitions:`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"67.0138888888889%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnElEQVQ4y3WSh27DMAxE/f//2Tap46m9fOXRUWAgqQBC++l41GCdh/URm3EwLmBedp1zbKzDbiycD+A5zq2Mjaw9xhHOOeRSkXNBqQ1FxkMIASllsB3Hob33XiAe18Yt7vdAazgkmoyb9HwspoTBWoufn5u+2tu8LPj6/sY0TRgfD41F1niWYdi781FjjK7t0pcqCqmGC6WUl0IenOYFs8S6bljWFeu2KYgXHdP3RdJtqO2MnsFAH8bxobI7MMSE32nGKpdjPi8m8SflM4JYFCXOvsDLeR+S7JUTeL//qsLuY64Fe7RY/IbV7+pT944PW7lDlUk845r6J5ZVeWDwkgbTvhquwGAUGEt6PdSD571UO+Wsc/oZBVplrgpZECbbPgBzzW9A9/wF+T/g7XbXP3VNeRPg7NaPCl1XmD4AY4wKY388LxYF7pj9KhWswPFBoUD6z6CnL2AvxvVjl6dCl/ybOhaFMEJqbe9FoQ/XS2xMmdWlj1fYCRRF9vSdH5lruxQ27OZ/IIvDVEurb0C1RP4kMyOc8yrgRrio/wPz2/lBCe89AgAAAABJRU5ErkJggg==')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"Gihub Secrets\",\n        \"title\": \"Gihub Secrets\",\n        \"src\": \"/refarch-kc/static/b4dca65a764bb2f9b7db373831f23057/3cbba/github-secrets.png\",\n        \"srcSet\": [\"/refarch-kc/static/b4dca65a764bb2f9b7db373831f23057/7fc1e/github-secrets.png 288w\", \"/refarch-kc/static/b4dca65a764bb2f9b7db373831f23057/a5df1/github-secrets.png 576w\", \"/refarch-kc/static/b4dca65a764bb2f9b7db373831f23057/3cbba/github-secrets.png 1152w\", \"/refarch-kc/static/b4dca65a764bb2f9b7db373831f23057/c1b35/github-secrets.png 1276w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <h2>{`Task 2 - Build Component Images`}</h2>\n    <p>{`The majority of the microservices that comprise the Reefer Container Shipment solution reference implementation are built using the `}<a parentName=\"p\" {...{\n        \"href\": \"https://appsody.dev\"\n      }}>{`Appsody`}</a>{` open-source project. While each microservice is free to choose its own specific technology for implementation via `}<a parentName=\"p\" {...{\n        \"href\": \"https://appsody.dev/docs/stacks/stacks-overview\"\n      }}>{`Appsody Stacks`}</a>{`, each component can be easily built in any given environment by issuing the `}<a parentName=\"p\" {...{\n        \"href\": \"https://appsody.dev/docs/using-appsody/building-and-deploying\"\n      }}><inlineCode parentName=\"a\">{`appsody build`}</inlineCode>{` commands`}</a>{`.`}</p>\n    <p>{`The second task in each component microservice’s workflow, `}<strong parentName=\"p\"><a parentName=\"strong\" {...{\n          \"href\": \"https://appsody.dev/docs/using-appsody/building-and-deploying\"\n        }}>{`build-docker-image`}</a></strong>{`:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`runs on a base Ubuntu container image`}</li>\n      <li parentName=\"ul\">{`creates a new semantically-versioned tag `}<em parentName=\"li\">{`(in the form of `}<inlineCode parentName=\"em\">{`0.1.2`}</inlineCode>{`)`}</em>{` for the repository`}</li>\n      <li parentName=\"ul\">{`installs the latest Appsody CLI tools, performs the `}<inlineCode parentName=\"li\">{`appsody build`}</inlineCode>{` command with the `}<a parentName=\"li\" {...{\n          \"href\": \"https://appsody.dev/docs/using-appsody/building-and-deploying#building-your-runtime-docker-image-with-appsody\"\n        }}>{`appropriate parameters`}</a></li>\n      <li parentName=\"ul\">{`tags the newly created version-specific image with `}<inlineCode parentName=\"li\">{`latest`}</inlineCode>{` as well`}</li>\n      <li parentName=\"ul\">{`pushes the image with both tags to the public Docker Hub repository defined by the aforementioned repository secrets`}</li>\n      <li parentName=\"ul\">{`and stores the `}<inlineCode parentName=\"li\">{`app-deploy.yaml`}</inlineCode>{` generated by the `}<inlineCode parentName=\"li\">{`appsody build`}</inlineCode>{` for use in the next task of updating the GitOps repository.`}</li>\n    </ul>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"43.05555555555555%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABK0lEQVQoz62RTU7DMBCFfQ4ES/4kVkhsWHCEihOCBEgg4ARchR2iSaQ2DYmd2o49fsy4TVWJdsdIn/I8nnnWZNTlc4mLxwKT9wq3zGTkrcQN3x3cTXF0P8XhFqdcf/JQ4Jg5fypw9VLi+rXEGWu18EDNzB0wY2qXMLOUczm/g3oL6RNGrYAEic8m4OOLsxTQti2MMQgDnxMxkStorZncsxtFaSW0J1Q9gYgwhJgJMW5p2nylZx8K64gJ/xLK+wHWOnzXGlVjeNQeznkMQ2AGyL2c9yH33vsNarm0EHo20lpjvmjw03asDbpOw/Q9gozND4TwFzEdPYRsKElrLXS/xMK4bKZ5KfKiNO2LxP/MOpcnHMmGIlbL4Bd5BCkcIUqIvJzIy9iF9En/6PMLebeqm7J+puMAAAAASUVORK5CYII=')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"Docker hub repository\",\n        \"title\": \"Docker hub repository\",\n        \"src\": \"/refarch-kc/static/dc1fe8e2fb0f8fd5b59bc2df364151ae/3cbba/dockerhub-repo.png\",\n        \"srcSet\": [\"/refarch-kc/static/dc1fe8e2fb0f8fd5b59bc2df364151ae/7fc1e/dockerhub-repo.png 288w\", \"/refarch-kc/static/dc1fe8e2fb0f8fd5b59bc2df364151ae/a5df1/dockerhub-repo.png 576w\", \"/refarch-kc/static/dc1fe8e2fb0f8fd5b59bc2df364151ae/3cbba/dockerhub-repo.png 1152w\", \"/refarch-kc/static/dc1fe8e2fb0f8fd5b59bc2df364151ae/c63e3/dockerhub-repo.png 1290w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <h2>{`Task 3 - Update GitOps`}</h2>\n    <p>{`The final task, `}<strong parentName=\"p\"><a parentName=\"strong\" {...{\n          \"href\": \"https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/blob/master/.github/workflows/dockerbuild.yaml#L119-L153\"\n        }}>{`update-gitops`}</a></strong>{`, is the linkage to our `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-kc/infrastructure/devops-gitops/\"\n      }}>{`GitOps implementation`}</a>{`, which is publicly available via `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-kc-gitops\"\n      }}>{`ibm-cloud-architecture/refarch-kc-gitops`}</a>{`.`}</p>\n    <p>{`This task updates the `}<inlineCode parentName=\"p\">{`app-deploy.yaml`}</inlineCode>{` file in every environment subdirectory in the GitOps repository for that specific microservice, by replacing each copy with the newly revised `}<inlineCode parentName=\"p\">{`app-deploy.yaml`}</inlineCode>{` generated in the previous task.`}</p>\n    <p>{`This simple approach of overwriting works for two reasons:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The `}<inlineCode parentName=\"li\">{`app-deploy.yaml`}</inlineCode>{` that is checked into the original microservice repository is patched by the `}<inlineCode parentName=\"li\">{`appsody build`}</inlineCode>{` command, such as updating the image tag.`}</li>\n      <li parentName=\"ul\">{`No changes are made directly to the `}<inlineCode parentName=\"li\">{`app-deploy.yaml`}</inlineCode>{` file within the GitOps repo. Instead, modifications required for each environment are stored as patches, applied using `}<inlineCode parentName=\"li\">{`kustomize`}</inlineCode>{` at deployment time.`}</li>\n    </ul>\n    <p>{`The update is performed via a standard `}<inlineCode parentName=\"p\">{`git commit`}</inlineCode>{` process, as this allows for a visible audit trail of environment management and operations updates - one of the key advantages of the GitOps approach!`}</p>\n    <h1>{`Next steps`}</h1>\n    <p><em parentName=\"p\">{`For details on how the GitOps repository is structured and how to create your own environment definitions,`}</em>{` reference the peer `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-kc/infrastructure/devops-gitops/\"\n      }}>{`GitOps Environments`}</a>{` chapter of this manual.`}</p>\n    <p><em parentName=\"p\">{`For details on how the Continuous Delivery implementation leverages the GitOps artifacts,`}</em>{` reference the peer `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-kc/infrastructure/devops-continuous-delivery/\"\n      }}>{`Continuous Delivery (CD)`}</a>{` chapter of this manual.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}