{"componentChunkName":"component---src-pages-integration-tests-order-cancellation-index-mdx","path":"/integration-tests/order-cancellation/","result":{"pageContext":{"frontmatter":{"title":"Order Cancelled integration test case","description":"Order Cancelled integration test case"},"relativePagePath":"/integration-tests/order-cancellation/index.mdx","titleType":"append","MdxNode":{"id":"1f1ad29c-20a9-5561-84f7-864aec56a9d4","children":[],"parent":"24eea721-ccda-5321-a9ef-a7375e271d33","internal":{"content":"---\ntitle: Order Cancelled integration test case\ndescription: Order Cancelled integration test case\n---\n\nHere you can find the order cancellation integration test for the Reefer Containers EDA reference implementation. This test case tests the compensation process that must happen once an order is cancelled. That is, if an order is cancelled, the container allocated to such order must become empty and available again as well as the voyage assigned to them that will now reflect the space the container was taking from the voyage as free to be used. The following diagram depics roughly this path on a flow base fashion where the blue square rectangles, purple rounded rectangles and orange rectangles represent actions taken by the test case, events produced to the event backbone (either Kafka or IBM Event Streams) and object statuses respectively.\n\n![flow](images/Slide1.png)\n\n## Tests\n\nThe following sequence diagrams represent each of the tests within this order cancellation integration test case.\n\n### Test 1 - Create order\n\nThis test will make sure that a CreateOrderCommand event is created and delivered to the appropriate kafka topic and, as a result, a new order with the correspondent events are also created.\n\n![create order](images/Slide2.png)\n\n### Test 2 - Container Allocated\n\nThis test will make sure that the expected container is assigned to the new order.\n\n![container allocated](images/Slide3.png)\n\n### Test 3 - Voyage Assigned\n\nThis test will make sure that the expected voyage is assigned to the new order.\n\n![voyage assigned](images/Slide4.png)\n\n### Test 4 - Order Assigned\n\nThis test will make sure that the resulting order is as expected. That is, it transitions to the assigned status and has a container and voyage assigned to it.\n\n![order assigned](images/Slide5.png)\n\n### Test 5 - Order Cancelled\n\nThis test will ensure that once the cancel order API is called, the appropriate CancelOrderCommand event is created so that the order is eventually cancelled as a result.\n\n![order cancelled](images/Slide6.png)\n\n### Test 6 - Order Cancelled REST\n\nThis tests will use the Order Command microservice's and Order Query microservice's API endpoints to ensure the order is eventually cancelled as expected.\n\n![order cancelled REST](images/Slide7.png)\n\n### Test 7 - Container Unassigned REST\n\nThis test will ensure the compensation process for the Containers microservice is properly executed so that the container previously allocated to the order is now empty and available to be used.\n\n![container unassigned](images/Slide8.png)\n\n### Test 8 - Voyage Compensated\n\nThis test will ensure the compensation process for the Voyage microservice is properly executed so that the voyage previously assigned to the order now reflects that space the container for such order was taking is available to be used.\n\n![voyage compensated](images/Slide9.png)\n","type":"Mdx","contentDigest":"5042d40d1e8a4d30016a9ee6a6e42889","counter":396,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Order Cancelled integration test case","description":"Order Cancelled integration test case"},"exports":{},"rawBody":"---\ntitle: Order Cancelled integration test case\ndescription: Order Cancelled integration test case\n---\n\nHere you can find the order cancellation integration test for the Reefer Containers EDA reference implementation. This test case tests the compensation process that must happen once an order is cancelled. That is, if an order is cancelled, the container allocated to such order must become empty and available again as well as the voyage assigned to them that will now reflect the space the container was taking from the voyage as free to be used. The following diagram depics roughly this path on a flow base fashion where the blue square rectangles, purple rounded rectangles and orange rectangles represent actions taken by the test case, events produced to the event backbone (either Kafka or IBM Event Streams) and object statuses respectively.\n\n![flow](images/Slide1.png)\n\n## Tests\n\nThe following sequence diagrams represent each of the tests within this order cancellation integration test case.\n\n### Test 1 - Create order\n\nThis test will make sure that a CreateOrderCommand event is created and delivered to the appropriate kafka topic and, as a result, a new order with the correspondent events are also created.\n\n![create order](images/Slide2.png)\n\n### Test 2 - Container Allocated\n\nThis test will make sure that the expected container is assigned to the new order.\n\n![container allocated](images/Slide3.png)\n\n### Test 3 - Voyage Assigned\n\nThis test will make sure that the expected voyage is assigned to the new order.\n\n![voyage assigned](images/Slide4.png)\n\n### Test 4 - Order Assigned\n\nThis test will make sure that the resulting order is as expected. That is, it transitions to the assigned status and has a container and voyage assigned to it.\n\n![order assigned](images/Slide5.png)\n\n### Test 5 - Order Cancelled\n\nThis test will ensure that once the cancel order API is called, the appropriate CancelOrderCommand event is created so that the order is eventually cancelled as a result.\n\n![order cancelled](images/Slide6.png)\n\n### Test 6 - Order Cancelled REST\n\nThis tests will use the Order Command microservice's and Order Query microservice's API endpoints to ensure the order is eventually cancelled as expected.\n\n![order cancelled REST](images/Slide7.png)\n\n### Test 7 - Container Unassigned REST\n\nThis test will ensure the compensation process for the Containers microservice is properly executed so that the container previously allocated to the order is now empty and available to be used.\n\n![container unassigned](images/Slide8.png)\n\n### Test 8 - Voyage Compensated\n\nThis test will ensure the compensation process for the Voyage microservice is properly executed so that the voyage previously assigned to the order now reflects that space the container for such order was taking is available to be used.\n\n![voyage compensated](images/Slide9.png)\n","fileAbsolutePath":"/home/runner/work/refarch-kc/refarch-kc/docs/src/pages/integration-tests/order-cancellation/index.mdx"}}},"staticQueryHashes":["1054721580","1054721580","1364590287","2102389209","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}